---

- set_fact:
    ansibletestFolderTestPassed: false


- name: "Start check of folder {{ path }}"
  stat:
    path: "{{ path }}"
  register: st

- debug:
    var: st
  when: "{{debug==true}}"

- include: test_present.yml
  when:
    - "{{ expected == 'present' }}"

- include: test_absent.yml
  when:
    - "{{ expected == 'absent' }}"

- debug:
    var: ansibletestFolderTestPassed
  when: "{{debug==true}}"

- debug:
    msg: "TEST FAILED: with path {{ path }}, expected {{ expected }} "
  when:
    - ansibletestFolderTestPassed == false

- debug:
    msg: "TEST PASSED: with path {{ path }}, expected {{ expected }} "
  when:
    - ansibletestFolderTestPassed == true

